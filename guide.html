<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Call Change Simulator Guide</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        color: #333;
      }

      h1,
      h2,
      h3 {
        color: #007bff;
      }

      .back-button {
        display: inline-block;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        margin-bottom: 20px;
      }

      .back-button:hover {
        background-color: #0056b3;
      }

      .section {
        margin-bottom: 40px;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      .icon-example {
        display: inline-block;
        width: 24px;
        height: 24px;
        vertical-align: middle;
        margin: 0 5px;
      }

      .button-example {
        display: inline-block;
        padding: 6px 12px;
        background-color: #007bff;
        color: white;
        border-radius: 5px;
        margin: 0 5px;
      }

      .bell-example {
        display: inline-block;
        width: 30px;
        height: 30px;
        border: 2px solid #007bff;
        border-radius: 50%;
        text-align: center;
        line-height: 30px;
        margin: 0 5px;
        font-weight: bold;
        color: #007bff;
      }

      .bell-example.selected {
        background-color: #007bff;
        color: white;
      }

      .bell-example.highlight {
        background-color: yellow;
      }

      .bell-example.matched {
        background-color: lightgreen;
      }

      .bell-example.swapped {
        border-color: red;
      }

      .toc {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 5px;
        margin-bottom: 30px;
      }

      .toc ul {
        list-style-type: none;
        padding-left: 20px;
      }

      .toc a {
        color: #007bff;
        text-decoration: none;
      }

      .toc a:hover {
        text-decoration: underline;
      }

      img {
        max-width: 100%;
        height: auto;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h1>Call Change Simulator Guide</h1>
    <h3>** Draft Version for testing - being updated regularly **</h3>

    <div class="toc">
      <h2>Table of Contents</h2>
      <ul>
        <li>
          <a href="#main-interface">Main Interface Elements</a>
          <ul>
            <li><a href="#bell-buttons">Bell Number Buttons</a></li>
            <li><a href="#bell-selection">Bell Selection Area</a></li>
            <li><a href="#icons">Icons and Controls</a></li>
            <li><a href="#current-order">Current Order Display</a></li>
            <li><a href="#pattern-controls">Pattern Controls</a></li>
            <li><a href="#playback-controls">Playback Controls</a></li>
            <li><a href="#selection-bells">Selection Bells</a></li>
            <li><a href="#history">Change History</a></li>
          </ul>
        </li>
        <li>
          <a href="#dialog-boxes">Dialog Boxes</a>
          <ul>
            <li><a href="#reference-box">Reference Box</a></li>
            <li><a href="#patterns-box">Patterns Box</a></li>
            <li><a href="#options">Options</a></li>
          </ul>
        </li>
        <li>
          <a href="#basic-usage">Basic Usage</a>
          <ul>
            <li><a href="#change-calling">Change Calling</a></li>
            <li><a href="#patterns">Working with Patterns</a></li>
            <li><a href="#pattern-sequences">Pattern Sequences</a></li>
            <li><a href="#reference">Using the Reference Box</a></li>
            <li><a href="#jump-feature">Jump Feature</a></li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="section" id="main-interface">
      <h2>Main Interface Elements</h2>

      <div id="bell-buttons">
        <h3>Bell Number Buttons</h3>
        <p>
          At the top of the simulator, you'll find buttons for selecting the
          number of bells (5, 6, 8, 10, or 12). These determine how many bells
          you'll be working with.
        </p>
        <div class="button-example">6 Bells</div>
      </div>

      

      <div id="icons">
        <h3>Icons and Controls</h3>
        <p>The simulator features several important icons:</p>
        <ul>
          <li>
            <svg class="icon-example" viewBox="0 0 24 24">
              <path
                fill="#007bff"
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
              />
            </svg>
            Reference Box - Access guided call change sequences
          </li>
          <li>
            <svg class="icon-example" viewBox="0 0 24 24">
              <path
                fill="#007bff"
                d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"
              />
            </svg>
            Patterns Box - Access and manage pattern collections
          </li>
          <li>
            <svg class="icon-example" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" fill="#007bff" />
              <circle cx="12" cy="12" r="7" fill="white" />
              <circle cx="12" cy="12" r="3" fill="#007bff" />
            </svg>
            Target Icon - Jump to a specific pattern
          </li>
          <li>
            <svg class="icon-example" viewBox="0 0 24 24">
              <path
                fill="#007bff"
                d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"
              />
            </svg>
            Reset Icon - Reset the simulator to various states
          </li>
          <li>
            <button
              class="help-button"
              style="
                font-size: 22px;
                font-weight: bold;
                color: #007bff;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0;
                margin: 0 5px;
                width: 24px;
                height: 24px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                opacity: 0.7;
                vertical-align: middle;
              "
            >
              ?
            </button>
            <span style="vertical-align: middle"
              >Help Icon - Access this guide</span
            >
          </li>
        </ul>
      </div>

      <div id="current-order">
        <h3>Current Order Display</h3>
        <p>
          The current order of bells is displayed in a row, with visual
          indicators for:
        </p>
        <div class="bell-example">1</div>
        <div class="bell-example swapped">2</div>
        <div class="bell-example matched">3</div>
        <ul>
          <li>Normal bells (white background with blue border)</li>
          <li>Recently swapped bells (red border)</li>
          <li>Bells in their correct position for the target pattern (light green background)</li>
        </ul>
      </div>

      <div id="pattern-controls">
        <h3>Pattern Controls</h3>
        <p>
          The pattern dropdown allows you to select a target pattern. When a
          pattern is selected, bells will be highlighted in green when they
          reach their correct position.
        </p>
      </div>

      <div id="playback-controls">
        <h3>Playback Controls</h3>
        <p>Three main control buttons manage the ringing - shown and hidden as necessary:</p>
        <div class="button-example">Go</div>
        <div class="button-example">Stand</div>
        <div class="button-example">Rounds</div>
        <ul>
          <li>Go - Starts bell sound playback</li>
          <li>Stand - Stops bell sound playback</li>
          <li>Rounds - Resets the bells to rounds order (1234...)</li>
        </ul>
      </div>
      <div id="bell-selection">
        <h3>Bell Selection Area</h3>
        <p>The bell selection area is where you interact with the bells and make call changes:</p>
        <ul>
          <li>
            <strong>Bell Selection Icons</strong>:
            <ul>
              <li>Each bell is represented by a numbered icon</li>
              <li>Icons are arranged in a row, showing the current order of the bells</li>
              <li>When you click a bell, it becomes highlighted with a blue background and white text</li>
              <li>You can select up to two bells at a time for making changes</li>
              <li>When calling down, a "Lead" button appears between the selected bells</li>
              <li>Clicking the Lead button confirms the change</li>
            </ul>
          </li>
          <li>
            <strong>Additional Elements</strong>:
            <ul>
              <li>The pattern prompt appears below the bell icons, showing the bell order for the current target pattern</li>
              <li>When a pattern sequence is active, a sequence counter appears showing where you are in the sequence</li>
              <li>Error messages are temporarily displayed in this area if you attempt an invalid change</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div class="section" id="dialog-boxes">
      <h2>Icons and Dialog Boxes</h2>

      <div id="reference-box">
        <h3>Reference Box</h3>
        <p>
          The Reference Box is a powerful tool for learning call change
          sequences. When you open it, you'll see:
        </p>
        <ul>
          <li>
            <strong>Bell Number Selection</strong> - Choose between 5-12 bells.
            This selection is synchronized with the main simulator - changing it
            here will update the number of bells in the main interface.
          </li>
          <li>
            <strong>Calling Style Selection</strong> - Toggle between "Calling
            Up" and "Calling Down". This setting is also synchronized with the
            main simulator's options. The choice affects how changes are called:
            <ul>
              <li>
                Calling Up: The lower-numbered bell is called up (e.g., "2 to
                1")
              </li>
              <li>
                Calling Down: The higher-numbered bell is called down (e.g., "1
                to 2")
              </li>
            </ul>
          </li>
          <li>
            <strong>Pattern Selection</strong> - Two dropdown menus:
            <ul>
              <li>
                Start Pattern: Select your starting pattern (e.g., Rounds)
              </li>
              <li>End Pattern: Select your target pattern</li>
            </ul>
          </li>
          <li>
            <strong>Sequence Display</strong> - Shows the complete sequence of
            changes needed to get from the start pattern to the end pattern.
            Each change is displayed with:
            <ul>
              <li>The call (e.g., "2 to 1")</li>
              <li>The resulting pattern</li>
              <li>Visual indicators for recently swapped bells</li>
            </ul>
          </li>
        </ul>
      </div>

      <div id="patterns-box">
        <h3>Patterns Box</h3>
        <p>
          The Patterns Box allows you to select and work with different
          patterns. When you open it, you'll see:
        </p>
        <ul>
          <li>
            <strong>Pattern Selection Interface</strong>:
            <ul>
              <li>
                A list of available patterns for the current number of bells
              </li>
              <li>
                Each pattern shows its name and the actual bell order for that
                pattern
              </li>
              <li>
                Patterns are filtered based on the current number of bells
              </li>
              <li>
                Clicking a pattern immediately loads it into the simulator
              </li>
            </ul>
          </li>
        </ul>
        <h3>Pattern Sequence Builder</h3>
        <p>
          The Pattern Sequence Builder is a tool for creating custom sequences
          of patterns:
        </p>
        <ul>
          <li>
            <strong>Pattern Box Controls</strong>:
            <ul>
              <li>Start Sequence button to begin the sequence</li>
              <li>Undo button to remove the last added pattern</li>
              <li>Grid of available patterns to select from</li>
              <li>Close button to exit the builder</li>
            </ul>
          </li>
          <li>
            <strong>Available Functionality</strong>:
            <ul>
              <li>You can build a sequence using multiple patterns</li>
              <li>Patterns can be used more than once in the sequence</li>
              <li>The undo button removes the last pattern added</li>
              <li>The sequence numbers are displayed on the right</li>
              <li>
                When your pattern sequence is complete, click "Start Sequence"
                to load it into the simulator
              </li>
            </ul>
          </li>
          <li>
            <strong>Sequence Counter</strong>:
            <ul>
              <li>Appears in the main interface when a sequence is active</li>
              <li>Shows the current pattern number in the sequence</li>
              <li>Click to view the full sequence in a popup</li>
            </ul>
          </li>
          <li>
            <strong>Sequence Popup</strong>:
            <ul>
              <li>Displays the complete sequence of patterns</li>
              <li>Highlights the current pattern in green</li>
              <li>Can be dismissed by clicking or pressing Escape</li>
            </ul>
          </li>
        </ul>
      </div>

      <div id="jump-feature">
        <h3>Jump Feature</h3>
        <p>The Jump feature (target icon) allows you to:</p>
        <ol>
          <li>Instantly move to a specific pattern</li>
          <li>Practice transitions between patterns</li>
          <li>Combine with the Reference Box for efficient learning</li>
        </ol>
      </div>

      <div id="options">
        <h3>Options</h3>
        <p>
          The Options menu provides important settings that affect how the
          simulator works:
        </p>
        <ul>
          <li>
            <strong>Calling Style</strong>:
            <ul>
                <li>Choose between "Calling Up" and "Calling Down"</li>
              </ul>
          </li>
          <li>
            <strong>Open Handstroke</strong>:
            <ul>
                <li>Choose whether or not to have a handstroke gap</li>
              </ul>
          </li>
          <li>
            <strong>Spatial Sound</strong>:
            <ul>
                <li>Adds subtle 3D stereo effect - best used with headphones</li>
              </ul>
          </li>
          <li>
            <strong>Offline Mode</strong>:
            <ul>
              <li>Choose realistic bells sounds or generated tones</li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="reset-options">
        <h3>Resetting</h3>
        <p>The simulator provides two main reset options:</p>
        <ul>
          <li>
            <strong>Restart Pattern</strong>:
            <ul>
              <li>Available whenever a pattern sequence is active</li>
              <li>Resets an active pattern sequence to the start</li>
            </ul>
          </li>
          <li>
            <strong>Reset Everything</strong>:
            <ul>
              <li>Available at any time</li>
              <li>Resets the entire simulator to its initial state</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div class="section" id="basic-usage">
      <h2>Basic Usage</h2>

      <div id="change-calling">
        <h3>Change Calling</h3>
        <p>The simulator can be used in two modes:</p>
        <ul>
          <li>
            <strong>Silent Mode</strong>:
            <ul>
              <li>Use without playback for silent practice</li>
              <li>
                Ideal for following along at practices or where sounds are not
                appropriate
              </li>
              <li>All features remain available without sound</li>
            </ul>
          </li>
          <li>
            <strong>Playback Mode</strong>:
            <ul>
              <li>Use with sound for a more realistic experience</li>
              <li>Helps with timing and rhythm</li>
              <li>Can be toggled on/off using the playback controls</li>
            </ul>
          </li>
        </ul>
        <p>To call changes:</p>
        <ol>
          <li>
            Select the bells you want to swap according to the rules of your
            chosen calling style
          </li>
          <li>The swap will occur on the next handstroke</li>
          <li>Use the Go/Stand buttons to control playback if desired</li>
        </ol>
        <p>The calling style (Up/Down) affects how changes are called:</p>
        <ul>
          <li>
            Calling Up: Follow the rules for calling up (e.g., adjacent bells)
          </li>
          <li>Calling Down: Follow the rules for calling down</li>
        </ul>
        <p>
          Remember to always follow the rules appropriate for your selected
          calling style.
        </p>
      </div>

      <div id="playback-controls">
        <h3>Using Playback Controls</h3>
        <p>The simulator provides three main playback control buttons:</p>
        <ul>
          <li>
            <strong>Go Button</strong>:
            <ul>
              <li>Starts the ringing sequence</li>
              <li>Only visible when the simulator is in a stopped state</li>
              <li>When clicked, the bells will begin ringing</li>
            </ul>
          </li>
          <li>
            <strong>Stand Button</strong>:
            <ul>
              <li>Stops the ringing sequence</li>
              <li>Only visible when the simulator is in a ringing state</li>
              <li>When clicked, a Stand notification will be displayed</li>
              <li>The bells will stop at the next handstroke</li>
            </ul>
          </li>
          <li>
            <strong>Rounds Button</strong>:
            <ul>
              <li>Returns the bells to rounds (1234...)</li>
              <li>Only visible when the bells are not in Rounds order</li>
              <li>When clicked, a Rounds notification will be displayed</li>
              <li>The bells will return to rounds at the next handstroke</li>
            </ul>
          </li>
        </ul>
        <p>
          <strong>Important Notes:</strong>
        </p>
        <ul>
          <li>Stand and Rounds actions are applied at the next handstroke</li>
          <li>When a control is clicked, a notification will appear showing the pending action</li>
          <li>The notification will remain visible until the action is applied at the next handstroke</li>
          <li>You cannot click a different control while the previous action is still in progress</li>
        </ul>
      </div>
      <div id="options">
        <h3>Options</h3>
        <p>
          The Options menu provides important settings that affect how the
          simulator works:
        </p>
        <ul>
          <li>
            <strong>Calling Style</strong>:
            <ul>
              <li>Choose between "Calling Up" and "Calling Down"</li>
              <li>Affects how changes are called in the simulator</li>
              <li>Changes are synchronized with the Reference Box</li>
            </ul>
          </li>
          <li>
            <strong>Open Handstroke</strong>:
            <ul>
              <li>Toggle to enable/disable open handstroke</li>
              <li>
                When enabled, the simulator will pause briefly at handstroke
              </li>
            </ul>
          </li>
          <li>
            <strong>Spatial Sound</strong>:
            <ul>
              <li>Toggle to enable/disable 3D spatial sound</li>
              <li>
                When enabled, bell sounds will appear to come from different
                positions
              </li>
              <li>Creates a more realistic ringing experience</li>
            </ul>
          </li>
          <li>
            <strong>Offline Mode</strong>:
            <ul>
              <li>Toggle to enable/disable offline mode</li>
              <li>
                Note: The simulator still requires an initial internet
                connection to load
              </li>
              <li>
                Once loaded, all features remain available in offline mode
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="patterns">
        <h3>Working with Patterns</h3>
        <p>You can work with patterns in several ways:</p>
        <ul>
          <li>
            <strong>Single Pattern Selection</strong>:
            <ul>
              <li>
                Use the pattern dropdown in the main interface to select a
                target pattern
              </li>
              <li>
                Bells will be highlighted in green when they reach their correct
                position
              </li>
              <li>
                Alternatively, use the Patterns Box to select and load a pattern
                directly
              </li>
            </ul>
          </li>
          <li>
            <strong>Pattern Sequences</strong>:
            <ul>
              <li>
                Use the Pattern Sequence Builder to create sequences of multiple
                patterns
              </li>
              <li>
                You can include the same pattern multiple times in a sequence
              </li>
              <li>
                The simulator will automatically progress through the sequence
                as you achieve each pattern
              </li>
            </ul>
          </li>
          <li>
            <strong>Pattern Transitions</strong>:
            <ul>
              <li>
                Use the Reference Box to get suggested routes between patterns
              </li>
              <li>
                The Reference Box shows the most efficient sequence of changes
                to reach your target pattern
              </li>
              <li>
                This is particularly helpful when learning new patterns or
                practicing transitions
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <div id="pattern-sequences">
        <h3>Pattern Sequences</h3>
        <p>To create and use pattern sequences:</p>
        <ol>
          <li>
            <strong>Starting a New Sequence</strong>:
            <ul>
              <li>
                Click the "Custom Call Change Sequence" button in the main
                interface
              </li>
              <li>This opens the Pattern Sequence Box</li>
              <li>You will automatically start in Rounds</li>
            </ul>
          </li>
          <li>
            <strong>Building the Sequence</strong>:
            <ul>
              <li>Click on patterns in the order you want them to appear</li>
              <li>Each pattern you click will be added to the sequence</li>
              <li>Use the Undo button to remove the last pattern if needed</li>
              <li>You can add as many patterns as needed</li>
            </ul>
          </li>
          <li>
            <strong>Using the Sequence</strong>:
            <ul>
              <li>Click "Start Sequence" when you're ready to begin</li>
              <li>
                The sequence will be immediately available in the main simulator
              </li>
              <li>
                Make call changes in the simulator to achieve each pattern in
                sequence
              </li>
              <li>
                The simulator will automatically progress to the next pattern
                when you achieve the current one
              </li>
              <li>Use the Reference Box alongside for guidance</li>
            </ul>
          </li>
          <li>
            <strong>Viewing the Sequence</strong>:
            <ul>
              <li>
                Click the sequence counter in the main interface to view the
                popup
              </li>
              <li>
                The popup shows your sequence of patterns with the current one
                highlighted in green
              </li>
              <li>Click anywhere on the popup or press Escape to dismiss it</li>
            </ul>
          </li>
        </ol>
      </div>

      <div id="reference">
        <h3>Using the Reference Box</h3>
        <p>The Reference Box helps you learn call change sequences:</p>
        <ol>
          <li>Click the Reference Box icon (magnifying glass) to open it</li>
          <li>Select your desired number of bells (5-12)</li>
          <li>Choose your preferred calling style (Up/Down)</li>
          <li>Select your start and end patterns from the dropdowns</li>
          <li>
            The sequence will automatically update to show the required changes
          </li>
          <li>
            You can:
            <ul>
              <li>Load pairs of patterns to see the most efficient route</li>
              <li>Compare the calls needed for different calling styles</li>
              <li>
                Use the reference box example changes as a guide while
                practicing in the main simulator
              </li>
              <li>
                Help navigate through a pattern sequence if you are unsure of
                where to start with a specific pair of patterns
              </li>
            </ul>
          </li>
        </ol>
        <p>
          <strong>Important Notes:</strong>
        </p>
        <ul>
          <li>
            The Reference Box will always load with the same number of bells as
            are active in the simulator</li>
            <li>Previously selected pairs of patterns
            and the respective changes will remain available unless you change
            the number of bells in the simulator before reopening the Reference
            Box</li>
          </li>
          <li>
            The sequence display updates automatically when you change any
            settings
          </li>
          <li>
            The sequence shows an efficient path between your selected patterns
          </li>
        </ul>
      </div>

      <div id="jump-feature">
        <h3>Using the Jump Feature</h3>
        <p>The Jump feature allows you to instantly move to any pattern:</p>
        <ol>
          <li>First, select your desired pattern from the pattern dropdown in the main interface</li>
          <li>Click the target icon in the main interface</li>
          <li>The simulator will instantly update to show the selected pattern</li>
          <li>All bells will be in their correct positions for the new pattern</li>
        </ol>
        <p>
          <strong>Important Notes:</strong>
        </p>
        <ul>
          <li>The Jump feature is particularly useful for practicing specific patterns or transitions</li>
          <li>You can use it in combination with the Reference Box to practice specific sequences</li>
          <li>Jumping to a new pattern adds a "Jump" entry to your change history, preserving all previous entries</li>
        </ul>
      </div>

      <div id="reset-options">
        <h3>Reset Options</h3>
        <p>The simulator provides two main reset options:</p>
        <ul>
          <li>
            <strong>Restart Pattern</strong>:
            <ul>
              <li>Only available when a pattern sequence is active</li>
              <li>Resets the bells to rounds order (1234...)</li>
              <li>Clears the change history except for the initial "Go!" entry</li>
              <li>Maintains the current pattern sequence but resets it to the start</li>
              <li>If playback is active, the reset will be queued and applied at the next handstroke</li>
              <li>A notification will appear showing the pending reset</li>
            </ul>
          </li>
          <li>
            <strong>Reset Everything</strong>:
            <ul>
              <li>Available at any time</li>
              <li>Resets the pattern dropdown to its default state</li>
              <li>Resets the bells to rounds order (1234...)</li>
              <li>Clears the change history except for the initial "Go!" entry</li>
              <li>Clears any active pattern sequence</li>
              <li>Removes the pattern sequence counter from the display</li>
              <li>If playback is active, a notification will appear showing the pending reset</li>
              <li>The reset will be queued and applied at the next handstroke</li>
            </ul>
          </li>
        </ul>
        <p>
          <strong>Important Notes:</strong>
        </p>
        <ul>
          <li>Both reset options can be used while playback is active</li>
          <li>When a reset is queued during playback, a notification will appear</li>
          <li>The notification will remain visible until the reset is applied at the next handstroke</li>
          <li>You cannot trigger a reset while another action is still pending</li>
        </ul>
      </div>
    </div>
  </body>
</html>
